(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(72)},41:function(e,t,n){},62:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(9),i=n.n(r),s=(n(41),n(17)),c=n.n(s),m=n(32),l=n(10),u=n(7),g=n(11),p=n(12),d=n(14),h=n(13),f=n(15),b=n(74),v=n(79),x=n(75),w=n(76),E=n(77),I=n(78),O=n(33),M=n.n(O),S=(n(61),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:function(t){return e.props.onSubmit(t)}},o.a.createElement("p",null,"Choose and Upload your own Image"),o.a.createElement("input",{type:"file",name:"myImage",onChange:function(t){return e.props.handleImageChange(t)}}),this.props.file?o.a.createElement("button",{type:"submit",className:"uploadImage"},"Upload"):""))}}]),t}(a.Component)),D=(n(62),{toptext:"",bottomtext:"",isTopDragging:!1,isBottomDragging:!1,topY:"10%",topX:"50%",bottomX:"50%",bottomY:"90%",photos:[]}),y=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).getMemes=function(){M.a.get("https://api.imgflip.com/get_memes").then(function(t){if(200===t.status){var n=t.data.data.memes;e.setState({photos:n})}})},e.openImage=function(t){var n=e.state.photos[t];e.getBase64Image(n.url).then(function(n){e.setState(function(e){return Object(u.a)({currentImage:t,ownImage:!1,modalIsOpen:!e.modalIsOpen,currentImagebase64:n},D)})})},e.toggle=function(){e.setState(function(e){return{modalIsOpen:!e.modalIsOpen,file:""}},function(){e.getMemes()})},e.changeText=function(t){e.setState(Object(l.a)({},t.currentTarget.name,t.currentTarget.value))},e.getStateObj=function(t,n){var a=e.imageRef.getBoundingClientRect(),o=t.clientX-a.left,r=t.clientY-a.top,i={};return"bottom"===n?i={isBottomDragging:!0,isTopDragging:!1,bottomX:"".concat(o,"px"),bottomY:"".concat(r,"px")}:"top"===n&&(i={isTopDragging:!0,isBottomDragging:!1,topX:"".concat(o,"px"),topY:"".concat(r,"px")}),i},e.handleMouseDown=function(t,n){var a=e.getStateObj(t,n);document.addEventListener("mousemove",function(t){return e.handleMouseMove(t,n)}),e.setState(Object(u.a)({},a))},e.handleMouseMove=function(t,n){if(e.state.isTopDragging||e.state.isBottomDragging){var a={};"bottom"===n&&e.state.isBottomDragging?a=e.getStateObj(t,n):"top"===n&&e.state.isTopDragging&&(a=e.getStateObj(t,n)),e.setState(Object(u.a)({},a))}},e.handleMouseUp=function(t){document.removeEventListener("mousemove",e.handleMouseMove),e.setState({isTopDragging:!1,isBottomDragging:!1})},e.handleImageChange=function(t){t.preventDefault(),e.setState({file:t.target.files[0]})},e.onSubmit=function(t){t.preventDefault();var n=new FileReader,a=e.state.file;n.onloadend=function(){e.setState({file:a,currentImagebase64:n.result,ownImage:!1})},n.readAsDataURL(a)},e.convertSvgToImage=function(){var t=e.svgRef,n=(new XMLSerializer).serializeToString(t),a=document.createElement("canvas");a.setAttribute("id","canvas");var o=t.getBoundingClientRect();a.width=o.width,a.height=o.height;var r=document.createElement("img");r.setAttribute("src","data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))),r.onload=function(){a.getContext("2d").drawImage(r,0,0);var e=a.toDataURL("image/png"),t=document.createElement("a");t.download="meme.png",t.href=e,document.body.appendChild(t),t.click()}},e.uploadOwnImage=function(){e.setState({currentImagebase64:null,modalIsOpen:!0,ownImage:!0,toptext:"",bottomtext:""})},e.state=Object(u.a)({currentImage:0,modalIsOpen:!1,ownImage:!1,currentImagebase64:null,file:""},D),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getMemes()}},{key:"getBase64Image",value:function(e){return Object(m.a)(c.a.mark(function t(){var n,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then(function(e){return e.blob()});case 2:return n=t.sent,t.next=5,new Promise(function(e){var t=new FileReader;t.onload=function(){return e(t.result)},t.readAsDataURL(n)});case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this,t={fontFamily:"Impact",fontSize:"50px",textTransform:"uppercase",fill:"#FFF",stroke:"#000",userSelect:"none"};return o.a.createElement("div",null,o.a.createElement("div",{className:"main-content"},o.a.createElement("div",{className:"sidebar"},o.a.createElement(b.a,{href:"/"},o.a.createElement("h1",null,"Meme Factory")),o.a.createElement("h3",null,"This is a fun project for creating memes. Built with React."),o.a.createElement("h3",null,"Here is the List of Meme`s Avaliable to Edit"),o.a.createElement("button",{className:"ownUploadButton",onClick:function(){return e.uploadOwnImage()}},"Create Your Own")),o.a.createElement("div",{className:"content"},this.state.photos&&this.state.photos.map(function(t,n){return o.a.createElement("div",{className:"image-holder",key:n},o.a.createElement("span",{className:"meme-top-caption"},"Top text"),o.a.createElement("img",{style:{width:"100%",cursor:"pointer",height:"100%"},alt:n,src:t.url,onClick:function(){return e.openImage(n)}}),o.a.createElement("span",{className:"meme-bottom-caption"},"Bottom text"))}))),o.a.createElement(v.a,{className:"meme-gen-modal",isOpen:this.state.modalIsOpen},o.a.createElement(x.a,{toggle:this.toggle},"Create a Meme"),o.a.createElement(w.a,null,this.state.ownImage&&o.a.createElement(S,{onSubmit:function(t){return e.onSubmit(t)},handleImageChange:function(t){return e.handleImageChange(t)},file:this.state.file}),o.a.createElement("svg",{width:"600px",id:"svg_ref",height:"600px",ref:function(t){e.svgRef=t},xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},o.a.createElement("image",{ref:function(t){e.imageRef=t},xlinkHref:this.state.currentImagebase64,height:"600px",width:"600px"}),o.a.createElement("text",{style:Object(u.a)({},t,{zIndex:this.state.isTopDragging?4:1}),x:this.state.topX,y:this.state.topY,dominantBaseline:"middle",textAnchor:"middle",onMouseDown:function(t){return e.handleMouseDown(t,"top")},onMouseUp:function(t){return e.handleMouseUp(t,"top")}},this.state.toptext),o.a.createElement("text",{style:t,dominantBaseline:"middle",textAnchor:"middle",x:this.state.bottomX,y:this.state.bottomY,onMouseDown:function(t){return e.handleMouseDown(t,"bottom")},onMouseUp:function(t){return e.handleMouseUp(t,"bottom")}},this.state.bottomtext)),o.a.createElement("div",{className:"meme-form"},o.a.createElement(E.a,null,o.a.createElement(I.a,{for:"toptext"},"Top Text"),o.a.createElement("input",{className:"form-control",type:"text",name:"toptext",id:"toptext",placeholder:"Add text to the top",onChange:this.changeText})),o.a.createElement(E.a,null,o.a.createElement(I.a,{for:"bottomtext"},"Bottom Text"),o.a.createElement("input",{className:"form-control",type:"text",name:"bottomtext",id:"bottomtext",placeholder:"Add text to the bottom",onChange:this.changeText})),o.a.createElement("button",{onClick:function(){return e.convertSvgToImage()},className:"btn btn-primary"},"Meme It!")))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.66a16cfe.chunk.js.map
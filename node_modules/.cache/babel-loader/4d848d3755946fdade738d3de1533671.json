{"ast":null,"code":"import _objectSpread from \"/var/www/html/meme-factory/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/var/www/html/meme-factory/src/App.js\";\nimport React from 'react';\nimport { Modal, ModalHeader, ModalBody, FormGroup, Label, NavbarBrand } from 'reactstrap';\nconst initialState = {\n  toptext: \"\",\n  bottomtext: \"\",\n  isTopDragging: false,\n  isBottomDragging: false,\n  topY: \"10%\",\n  topX: \"50%\",\n  bottomX: \"50%\",\n  bottomY: \"90%\",\n  photos: []\n};\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.openImage = index => {\n      const image = this.state.photos[index];\n      const base_image = document.createElement(image);\n      base_image.src = image.src;\n      const base64 = this.getBase64Image(base_image);\n      this.setState(prevState => _objectSpread({\n        currentImage: index,\n        modalIsOpen: !prevState.modalIsOpen,\n        currentImagebase64: base64\n      }, initialState));\n    };\n\n    this.toggle = () => {\n      this.setState(prevState => ({\n        modalIsOpen: !prevState.modalIsOpen\n      }));\n    };\n\n    this.changeText = event => {\n      this.setState({\n        [event.currentTarget.name]: event.currentTarget.value\n      });\n    };\n\n    this.getStateObj = (e, type) => {\n      let rect = this.imageRef.getBoundingClientRect();\n      const xOffset = e.clientX - rect.left;\n      const yOffset = e.clientY - rect.top;\n      let stateObj = {};\n\n      if (type === \"bottom\") {\n        stateObj = {\n          isBottomDragging: true,\n          isTopDragging: false,\n          bottomX: \"\".concat(xOffset, \"px\"),\n          bottomY: \"\".concat(yOffset, \"px\")\n        };\n      } else if (type === \"top\") {\n        stateObj = {\n          isTopDragging: true,\n          isBottomDragging: false,\n          topX: \"\".concat(xOffset, \"px\"),\n          topY: \"\".concat(yOffset, \"px\")\n        };\n      }\n\n      return stateObj;\n    };\n\n    this.handleMouseDown = (e, type) => {\n      const stateObj = this.getStateObj(e, type);\n      document.addEventListener('mousemove', event => this.handleMouseMove(event, type));\n      this.setState(_objectSpread({}, stateObj));\n    };\n\n    this.handleMouseMove = (e, type) => {\n      if (this.state.isTopDragging || this.state.isBottomDragging) {\n        let stateObj = {};\n\n        if (type === \"bottom\" && this.state.isBottomDragging) {\n          stateObj = this.getStateObj(e, type);\n        } else if (type === \"top\" && this.state.isTopDragging) {\n          stateObj = this.getStateObj(e, type);\n        }\n\n        this.setState(_objectSpread({}, stateObj));\n      }\n    };\n\n    this.handleMouseUp = event => {\n      document.removeEventListener('mousemove', this.handleMouseMove);\n      this.setState({\n        isTopDragging: false,\n        isBottomDragging: false\n      });\n    };\n\n    this.convertSvgToImage = () => {\n      const svg = this.svgRef;\n      let svgData = new XMLSerializer().serializeToString(svg);\n      const canvas = document.createElement(\"canvas\");\n      canvas.setAttribute(\"id\", \"canvas\");\n      const svgSize = svg.getBoundingClientRect();\n      canvas.width = svgSize.width;\n      canvas.height = svgSize.height;\n      const img = document.createElement(\"img\");\n      img.setAttribute(\"src\", \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(svgData))));\n\n      img.onload = function () {\n        canvas.getContext(\"2d\").drawImage(img, 0, 0);\n        const canvasdata = canvas.toDataURL(\"image/png\");\n        const a = document.createElement(\"a\");\n        a.download = \"meme.png\";\n        a.href = canvasdata;\n        document.body.appendChild(a);\n        a.click();\n      };\n    };\n\n    this.state = _objectSpread({\n      currentImage: 0,\n      modalIsOpen: false,\n      currentImagebase64: null\n    }, initialState);\n  }\n\n  componentDidMount() {\n    fetch('https://api.imgflip.com/get_memes').then(response => console.log(response));\n    axios.get(\"https://api.imgflip.com/get_memes\").then(res => {\n      const persons = res.data;\n      this.setState({\n        persons\n      });\n    });\n  }\n\n  getBase64Image(img) {\n    var canvas = document.createElement(\"canvas\");\n    canvas.width = img.width;\n    canvas.height = img.height;\n    var ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    var dataURL = canvas.toDataURL(\"image/png\");\n    return dataURL;\n  }\n\n  render() {\n    const image = this.state.photos && this.state.photos.length > 0 && this.state.photos[this.state.currentImage];\n    const base_image = document.createElement(image);\n    debugger;\n    base_image.src = image.src;\n    var wrh = base_image.width / base_image.height;\n    var newWidth = 600;\n    var newHeight = newWidth / wrh;\n    const textStyle = {\n      fontFamily: \"Impact\",\n      fontSize: \"50px\",\n      textTransform: \"uppercase\",\n      fill: \"#FFF\",\n      stroke: \"#000\",\n      userSelect: \"none\"\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"main-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(NavbarBrand, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Make-a-Meme\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"This is a fun project inspired by imgur. Built with React.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"You can add top and bottom text to a meme-template, move the text around and can save the image by downloading it.\")), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, this.state.photos && this.state.photos.map((image, index) => React.createElement(\"div\", {\n      className: \"image-holder\",\n      key: image.src,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"meme-top-caption\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Top text\"), React.createElement(\"img\", {\n      style: {\n        width: \"100%\",\n        cursor: \"pointer\",\n        height: \"100%\"\n      },\n      alt: index,\n      src: image.src,\n      onClick: () => this.openImage(index),\n      role: \"presentation\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"meme-bottom-caption\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Bottom text\"))))), React.createElement(Modal, {\n      className: \"meme-gen-modal\",\n      isOpen: this.state.modalIsOpen,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Make-a-Meme\"), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      width: newWidth,\n      id: \"svg_ref\",\n      height: newHeight,\n      ref: el => {\n        this.svgRef = el;\n      },\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"image\", {\n      ref: el => {\n        this.imageRef = el;\n      },\n      xlinkHref: this.state.currentImagebase64,\n      height: newHeight,\n      width: newWidth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"text\", {\n      style: _objectSpread({}, textStyle, {\n        zIndex: this.state.isTopDragging ? 4 : 1\n      }),\n      x: this.state.topX,\n      y: this.state.topY,\n      dominantBaseline: \"middle\",\n      textAnchor: \"middle\",\n      onMouseDown: event => this.handleMouseDown(event, 'top'),\n      onMouseUp: event => this.handleMouseUp(event, 'top'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, this.state.toptext), React.createElement(\"text\", {\n      style: textStyle,\n      dominantBaseline: \"middle\",\n      textAnchor: \"middle\",\n      x: this.state.bottomX,\n      y: this.state.bottomY,\n      onMouseDown: event => this.handleMouseDown(event, 'bottom'),\n      onMouseUp: event => this.handleMouseUp(event, 'bottom'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, this.state.bottomtext)), React.createElement(\"div\", {\n      className: \"meme-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(Label, {\n      for: \"toptext\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, \"Top Text\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      name: \"toptext\",\n      id: \"toptext\",\n      placeholder: \"Add text to the top\",\n      onChange: this.changeText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    })), React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, React.createElement(Label, {\n      for: \"bottomtext\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Bottom Text\"), React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      name: \"bottomtext\",\n      id: \"bottomtext\",\n      placeholder: \"Add text to the bottom\",\n      onChange: this.changeText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      onClick: () => this.convertSvgToImage(),\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, \"Download Meme!\")))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/var/www/html/meme-factory/src/App.js"],"names":["React","Modal","ModalHeader","ModalBody","FormGroup","Label","NavbarBrand","initialState","toptext","bottomtext","isTopDragging","isBottomDragging","topY","topX","bottomX","bottomY","photos","App","Component","constructor","openImage","index","image","state","base_image","document","createElement","src","base64","getBase64Image","setState","prevState","currentImage","modalIsOpen","currentImagebase64","toggle","changeText","event","currentTarget","name","value","getStateObj","e","type","rect","imageRef","getBoundingClientRect","xOffset","clientX","left","yOffset","clientY","top","stateObj","handleMouseDown","addEventListener","handleMouseMove","handleMouseUp","removeEventListener","convertSvgToImage","svg","svgRef","svgData","XMLSerializer","serializeToString","canvas","setAttribute","svgSize","width","height","img","btoa","unescape","encodeURIComponent","onload","getContext","drawImage","canvasdata","toDataURL","a","download","href","body","appendChild","click","componentDidMount","fetch","then","response","console","log","axios","get","res","persons","data","ctx","dataURL","render","length","wrh","newWidth","newHeight","textStyle","fontFamily","fontSize","textTransform","fill","stroke","userSelect","map","cursor","el","zIndex"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Modal, ModalHeader, ModalBody, FormGroup, Label, NavbarBrand } from 'reactstrap';\n\nconst initialState = {\n  toptext: \"\",\n  bottomtext: \"\",\n  isTopDragging: false,\n  isBottomDragging: false,\n  topY: \"10%\",\n  topX: \"50%\",\n  bottomX: \"50%\",\n  bottomY: \"90%\",\n  photos : []\n}\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      currentImage: 0,\n      modalIsOpen: false,\n      currentImagebase64: null,\n      ...initialState\n    };\n  }\n\n  componentDidMount(){\n    fetch('https://api.imgflip.com/get_memes')\n    .then(response => console.log(response));\n\n    axios.get(`https://api.imgflip.com/get_memes`)\n      .then(res => {\n        const persons = res.data;\n        this.setState({ persons });\n      })\n\n  }\n\n\n  openImage = (index) => {\n    const image = this.state.photos[index];\n    const base_image = document.createElement(image);\n    base_image.src = image.src;\n    const base64 = this.getBase64Image(base_image);\n    this.setState(prevState => ({\n      currentImage: index,\n      modalIsOpen: !prevState.modalIsOpen,\n      currentImagebase64: base64,\n      ...initialState\n    }));\n  }\n\n  toggle = () => {\n    this.setState(prevState => ({\n      modalIsOpen: !prevState.modalIsOpen\n    }));\n  }\n\n  changeText = (event) => {\n    this.setState({\n      [event.currentTarget.name]: event.currentTarget.value\n    });\n  }\n\n  getStateObj = (e, type) => {\n    let rect = this.imageRef.getBoundingClientRect();\n    const xOffset = e.clientX - rect.left;\n    const yOffset = e.clientY - rect.top;\n    let stateObj = {};\n    if (type === \"bottom\") {\n      stateObj = {\n        isBottomDragging: true,\n        isTopDragging: false,\n        bottomX: `${xOffset}px`,\n        bottomY: `${yOffset}px`\n      }\n    } else if (type === \"top\") {\n      stateObj = {\n        isTopDragging: true,\n        isBottomDragging: false,\n        topX: `${xOffset}px`,\n        topY: `${yOffset}px`\n      }\n    }\n    return stateObj;\n  }\n\n  handleMouseDown = (e, type) => {\n    const stateObj = this.getStateObj(e, type);\n    document.addEventListener('mousemove', (event) => this.handleMouseMove(event, type));\n    this.setState({\n      ...stateObj\n    })\n  }\n\n  handleMouseMove = (e, type) => {\n    if (this.state.isTopDragging || this.state.isBottomDragging) {\n      let stateObj = {};\n      if (type === \"bottom\" && this.state.isBottomDragging) {\n        stateObj = this.getStateObj(e, type);\n      } else if (type === \"top\" && this.state.isTopDragging){\n        stateObj = this.getStateObj(e, type);\n      }\n      this.setState({\n        ...stateObj\n      });\n    }\n  };\n\n  handleMouseUp = (event) => {\n    document.removeEventListener('mousemove', this.handleMouseMove);\n    this.setState({\n      isTopDragging: false,\n      isBottomDragging: false\n    });\n  }\n\n  convertSvgToImage = () => {\n    const svg = this.svgRef;\n    let svgData = new XMLSerializer().serializeToString(svg);\n    const canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"id\", \"canvas\");\n    const svgSize = svg.getBoundingClientRect();\n    canvas.width = svgSize.width;\n    canvas.height = svgSize.height;\n    const img = document.createElement(\"img\");\n    img.setAttribute(\"src\", \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(svgData))));\n    img.onload = function() {\n      canvas.getContext(\"2d\").drawImage(img, 0, 0);\n      const canvasdata = canvas.toDataURL(\"image/png\");\n      const a = document.createElement(\"a\");\n      a.download = \"meme.png\";\n      a.href = canvasdata;\n      document.body.appendChild(a);\n      a.click();\n    };\n  }\n\n  getBase64Image(img) {\n    var canvas = document.createElement(\"canvas\");\n    canvas.width = img.width;\n    canvas.height = img.height;\n    var ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(img, 0, 0);\n    var dataURL = canvas.toDataURL(\"image/png\");\n    return dataURL;\n  }\n\n  render() {\n    const image = this.state.photos && this.state.photos.length > 0 &&  this.state.photos[this.state.currentImage];\n    const base_image = document.createElement(image);\n    debugger;\n    base_image.src = image.src;\n    var wrh = base_image.width / base_image.height;\n    var newWidth = 600;\n    var newHeight = newWidth / wrh;\n    const textStyle = {\n      fontFamily: \"Impact\",\n      fontSize: \"50px\",\n      textTransform: \"uppercase\",\n      fill: \"#FFF\",\n      stroke: \"#000\",\n      userSelect: \"none\"\n    }\n\n    return (\n      <div>\n        <div className=\"main-content\">\n          <div className=\"sidebar\">\n            <NavbarBrand href=\"/\">Make-a-Meme</NavbarBrand>\n            <p>\n              This is a fun project inspired by imgur. Built with React.\n            </p>\n            <p>\n              You can add top and bottom text to a meme-template, move the text around and can save the image by downloading it.\n            </p>\n          </div>\n          <div className=\"content\">\n            {this.state.photos && this.state.photos.map((image, index) => (\n              <div className=\"image-holder\" key={image.src}>\n                <span className=\"meme-top-caption\">Top text</span>\n                <img\n                  style={{\n                    width: \"100%\",\n                    cursor: \"pointer\",\n                    height: \"100%\"\n                  }}\n                  alt={index}\n                  src={image.src}\n                  onClick={() => this.openImage(index)}\n                  role=\"presentation\"\n                />\n              <span className=\"meme-bottom-caption\">Bottom text</span>\n              </div>\n            ))}\n          </div>\n        </div>\n        <Modal className=\"meme-gen-modal\" isOpen={this.state.modalIsOpen}>\n          <ModalHeader toggle={this.toggle}>Make-a-Meme</ModalHeader>\n          <ModalBody>\n            <svg\n              width={newWidth}\n              id=\"svg_ref\"\n              height={newHeight}\n              ref={el => { this.svgRef = el }}\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n              <image\n                ref={el => { this.imageRef = el }}\n                xlinkHref={this.state.currentImagebase64}\n                height={newHeight}\n                width={newWidth}\n              />\n              <text\n                style={{ ...textStyle, zIndex: this.state.isTopDragging ? 4 : 1 }}\n                x={this.state.topX}\n                y={this.state.topY}\n                dominantBaseline=\"middle\"\n                textAnchor=\"middle\"\n                onMouseDown={event => this.handleMouseDown(event, 'top')}\n                onMouseUp={event => this.handleMouseUp(event, 'top')}\n              >\n                  {this.state.toptext}\n              </text>\n              <text\n                style={textStyle}\n                dominantBaseline=\"middle\"\n                textAnchor=\"middle\"\n                x={this.state.bottomX}\n                y={this.state.bottomY}\n                onMouseDown={event => this.handleMouseDown(event, 'bottom')}\n                onMouseUp={event => this.handleMouseUp(event, 'bottom')}\n              >\n                  {this.state.bottomtext}\n              </text>\n            </svg>\n            <div className=\"meme-form\">\n              <FormGroup>\n                <Label for=\"toptext\">Top Text</Label>\n                <input className=\"form-control\" type=\"text\" name=\"toptext\" id=\"toptext\" placeholder=\"Add text to the top\" onChange={this.changeText} />\n              </FormGroup>\n              <FormGroup>\n                <Label for=\"bottomtext\">Bottom Text</Label>\n                <input className=\"form-control\" type=\"text\" name=\"bottomtext\" id=\"bottomtext\" placeholder=\"Add text to the bottom\" onChange={this.changeText} />\n              </FormGroup>\n              <button onClick={() => this.convertSvgToImage()} className=\"btn btn-primary\">Download Meme!</button>\n            </div>\n          </ModalBody>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}